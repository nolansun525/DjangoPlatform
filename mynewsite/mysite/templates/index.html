<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Welcome to mynewsite</title>
</head>
<body>
<h2>Welcome to mynewsite</h2>
<hr>
<ul>
    <li><a href='/list'>二手机列表</a></li>
    <li><a href='/about'>关于我</a></li>
</ul>
<hr>
<em>今日佳句：{{ quote }}</em>

<input type="text" id="i1">+
<input type="text" id="i2">=
<input type="text" id="i3">
<input type="button" value="AJAX提交" id="b1">
<table class="gridtable" align="center" id="pstable" border="1">
        <thead>
            <tr>
                <th  align="center" style="color:red" >姓名</th>
                <th  align="center" style="color:red" >编号</th>
            </tr>
        </thead>

        <tbody>
        {% for item in items %}
        <tr>
            <td>{{item.name}}</td>
            <td>{{item.id}}</td>
        </tr>
        {% endfor %}
        </tbody>

    </table>
</body>
<!--<script src="/static/js/jquery/jquery-1.12.4.min.js"></script>-->
{% load staticfiles %}
<script src="{% static 'js/jquery/jquery-1.12.4.min.js' %}" ></script>
<!--<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>-->
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
<script>
  $("#b1").on("click", function () {
    $.ajax({
      url:"/findresult/",
      type:"GET",
      <!--dataType:'json',-->
      data:{"i1":$("#i1").val(),"i2":$("#i2").val()},
      success:function (data) {
        $("#i3").val(data);
        var obj=data;
		var tbody=$('<tbody></tbody>');
		$(obj).each(function (index){
			var val=obj[index];
			var tr=$('<tr></tr>');
			tr.append('<td>'+ val.id + '</td>' + '<td>'+ val.name + '</td>');
			tbody.append(tr);
		});
$('#pstable tbody').replaceWith(tbody);


      }
    })
  })
</script>
</html>